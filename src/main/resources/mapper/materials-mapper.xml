<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.materials.mapper.MaterialsMapper">
	<select id="getMaterials" resultType="MaterialVO" parameterType="String">   
		SELECT mat_code, 
               mat_name,
               stock_cnt,
               safe_stock_cnt
          FROM mat
         WHERE 1=1
         <!-- 검색 조건 -->
         <if test="matName != null and matName != ''">
			AND mat_name LIKE '%'||#{matName}||'%'         
         </if>
      ORDER BY mat_code
	</select>
	
	<select id="getMaterialDetails" resultType="MaterialReadVO" parameterType="String">
		SELECT d.mat_lot_code,
               d.warehousing_cnt,
               d.check_done_cnt,
               d.out_cnt,
               d.remain_cnt,
               d.exp_date,
               d.qlty_check_status,
               d.mat_status,
               d.dump_date,
               d.unit_price,
               d.mat_code,
               d.company_code,
               m.mat_name
  	      FROM mat_detail d 
  	      		JOIN mat m	ON d.mat_code= m.mat_code
	     WHERE d.mat_code=#{matCode} 
	</select>
	
	<select id="getMaterialOrders" resultType="MaterialOrderVO">
		SELECT *
		FROM mat_orders
	</select>
	
	
</mapper>